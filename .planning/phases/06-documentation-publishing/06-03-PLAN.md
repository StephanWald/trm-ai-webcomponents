---
phase: 06-documentation-publishing
plan: 03
type: execute
wave: 2
depends_on:
  - 06-01
files_modified:
  - docs/package.json
  - docs/tsconfig.json
  - docs/docusaurus.config.ts
  - docs/sidebars.ts
  - docs/src/components/LiveExample.tsx
  - docs/src/components/ApiReference.tsx
  - docs/src/css/custom.css
  - docs/static/.nojekyll
  - docs/docs/getting-started.md
  - docs/docs/theming.md
autonomous: true
requirements:
  - DOCS-01
  - DOCS-04
  - DOCS-05

must_haves:
  truths:
    - "Running npm run build in /docs directory produces a static site in docs/build/"
    - "Developer can visit the docs site and see a getting-started guide with npm install and CDN script tag examples"
    - "Developer can visit the docs site and see a theming guide explaining --dwc-* token usage and dark mode"
    - "LiveExample component renders HTML in a sandboxed iframe with editable source code"
    - "ApiReference component renders props/events/methods/styles/parts tables from docs.json data"
  artifacts:
    - path: "docs/package.json"
      provides: "Docusaurus project manifest"
      contains: "@docusaurus/core"
    - path: "docs/docusaurus.config.ts"
      provides: "Docusaurus site configuration"
      contains: "skillspilot"
    - path: "docs/src/components/LiveExample.tsx"
      provides: "Interactive live example iframe component"
      contains: "iframe"
    - path: "docs/src/components/ApiReference.tsx"
      provides: "Auto-generated API reference table component"
      contains: "props"
    - path: "docs/docs/getting-started.md"
      provides: "Getting started guide for developers"
      contains: "npm install"
    - path: "docs/docs/theming.md"
      provides: "Theming guide for DWC tokens"
      contains: "--dwc-"
  key_links:
    - from: "docs/docusaurus.config.ts"
      to: "docs/docs/"
      via: "docs preset sidebarPath"
      pattern: "sidebarPath"
    - from: "docs/src/components/LiveExample.tsx"
      to: "component MDX pages"
      via: "MDX import"
      pattern: "LiveExample"
    - from: "docs/src/components/ApiReference.tsx"
      to: "docs.json"
      via: "JSON import in MDX"
      pattern: "ApiReference"
---

<objective>
Scaffold the Docusaurus 3 documentation site with custom React components for interactive examples and API reference, plus the getting-started and theming guide content pages.

Purpose: This establishes the complete documentation site framework (DOCS-01) with the two foundational content pages that developers need first: how to install/use components (DOCS-04) and how to theme them (DOCS-05). Custom LiveExample and ApiReference components are reusable building blocks for the component pages in Plan 04.

Output: Working Docusaurus site in /docs that builds successfully with getting-started and theming guides.
</objective>

<execution_context>
@/Users/beff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/beff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-documentation-publishing/06-RESEARCH.md
@.planning/phases/06-documentation-publishing/06-01-SUMMARY.md
@package.json
@docs.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Docusaurus project and configure site</name>
  <files>
    docs/package.json
    docs/tsconfig.json
    docs/docusaurus.config.ts
    docs/sidebars.ts
    docs/src/css/custom.css
    docs/static/.nojekyll
  </files>
  <action>
    1. Create the `/docs` directory at repo root.

    2. Initialize a Docusaurus 3 project. Create `docs/package.json` with dependencies:
       - `@docusaurus/core`: `3.9.2`
       - `@docusaurus/preset-classic`: `3.9.2`
       - `@docusaurus/types`: `3.9.2` (devDependency)
       - `@docusaurus/module-type-aliases`: `3.9.2` (devDependency)
       - `react`: `^18.0.0`
       - `react-dom`: `^18.0.0`
       - `typescript`: `~5.6.0` (devDependency)
       Scripts: `start` (docusaurus start), `build` (docusaurus build), `clear` (docusaurus clear), `serve` (docusaurus serve).

    3. Create `docs/tsconfig.json` for TypeScript support with appropriate Docusaurus config.

    4. Create `docs/docusaurus.config.ts`:
       - title: "Skillspilot Web Components"
       - tagline: "Production-ready web components for Skillspilot/TRM-AI"
       - url: placeholder `https://skillspilot.github.io` (comment: update when GitHub remote is established)
       - baseUrl: `/trm-ai-webcomponents/` (comment: matches repo name)
       - organizationName: `skillspilot`, projectName: `trm-ai-webcomponents`
       - trailingSlash: false
       - Use classic preset with:
         - docs: routeBasePath '/' (docs-only mode, no separate blog)
         - blog: false
         - theme.customCss: `./src/css/custom.css`
       - Navbar with title "Skillspilot WC", items: Docs sidebar link, GitHub repo link
       - Footer with links to npm package and GitHub

    5. Create `docs/sidebars.ts` with structure:
       ```
       Getting Started
       Theming
       Components/
         sp-org-chart
         sp-walkthrough
         sp-markdown-editor
       Changelog
       ```

    6. Create `docs/src/css/custom.css` with minimal Docusaurus theme customization (Infima CSS variables for colors matching the Skillspilot brand — use sensible defaults).

    7. Create `docs/static/.nojekyll` (empty file) to prevent GitHub Pages Jekyll processing.

    8. Run `cd docs && npm install` to install dependencies.
  </action>
  <verify>
    - `ls docs/package.json docs/docusaurus.config.ts docs/sidebars.ts docs/static/.nojekyll` all exist
    - `cd docs && npm run build 2>&1 | tail -5` shows build output (may fail if no content pages yet — that's expected, verify deps install correctly with `cd docs && node -e "require('@docusaurus/core')" && echo "OK"`)
  </verify>
  <done>
    Docusaurus project scaffolded in /docs with correct config, sidebars, styles, and .nojekyll; npm dependencies installed successfully.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create custom LiveExample and ApiReference React components</name>
  <files>
    docs/src/components/LiveExample.tsx
    docs/src/components/ApiReference.tsx
  </files>
  <action>
    1. **LiveExample.tsx** — Create a React component that renders HTML code in a sandboxed iframe:
       - Props: `code` (string, required), `height` (string, default '200px')
       - State: `source` (editable code string, initialized from `code` prop trimmed)
       - Renders an `<iframe>` with `srcDoc` containing a full HTML document that loads the Skillspilot web components CDN script and renders the source HTML
       - CDN script URL: `https://cdn.jsdelivr.net/npm/@skillspilot/webcomponents/dist/skillspilot/skillspilot.esm.js` (type="module")
       - Below the iframe, render a `<details>` element with summary "View / Edit Source" containing a `<textarea>` bound to `source` state
       - When the textarea changes, update `source` state which re-renders the iframe via `srcDoc`
       - Style the iframe with a 1px border, border-radius, full width
       - Use `sandbox="allow-scripts allow-same-origin"` on the iframe
       - Add a comment noting that before first npm publish, examples will show blank — this is expected

    2. **ApiReference.tsx** — Create a React component that renders component API documentation tables from docs.json data:
       - Props: `component` (object from docs.json components array)
       - Render sections conditionally (only if array is non-empty):
         - **Properties** table: columns Property (code), Attribute (code), Type (code), Default (code), Description
         - **Events** table: columns Event, Detail Type, Description
         - **Methods** table: columns Method, Signature, Description
         - **CSS Custom Properties** table: columns Property (code), Description
         - **CSS Parts** table: columns Part (code), Description
       - Use Docusaurus/Infima table styles (add `className` for styling)
       - Each section has an h3 heading
       - Handle edge cases: empty arrays gracefully skip sections, undefined/null data shows "—"
  </action>
  <verify>
    - `ls docs/src/components/LiveExample.tsx docs/src/components/ApiReference.tsx` both exist
    - TypeScript compiles: `cd docs && npx tsc --noEmit --skipLibCheck 2>&1 | head -20` (may need tsconfig adjustment — ensure it passes or only has non-blocking warnings)
  </verify>
  <done>
    LiveExample renders HTML in sandboxed iframe with editable source; ApiReference renders complete API tables (props, events, methods, CSS properties, CSS parts) from docs.json data; both components TypeScript-valid.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create getting-started and theming guide content pages</name>
  <files>
    docs/docs/getting-started.md
    docs/docs/theming.md
  </files>
  <action>
    1. **docs/docs/getting-started.md** — Create the getting-started guide:
       - Frontmatter: `title: Getting Started`, `sidebar_position: 1`, `slug: /`
       - Sections:
         - **Installation**: Two methods side by side:
           - npm: `npm install @skillspilot/webcomponents` with import examples (ES module import, lazy-loading via defineCustomElements)
           - CDN: `<script type="module" src="https://cdn.jsdelivr.net/npm/@skillspilot/webcomponents/dist/skillspilot/skillspilot.esm.js"></script>` with note about auto-registration
         - **Quick Start**: A minimal HTML example showing one of each component (sp-org-chart as simplest) with inline data
         - **Peer Dependencies**: Explain that sp-markdown-editor requires marked, DOMPurify, Prism.js, and Turndown as optional peer dependencies. Show install command.
         - **Browser Support**: Modern browsers with Web Components support (Chrome, Firefox, Safari, Edge)
         - **Next Steps**: Links to theming guide and component pages

    2. **docs/docs/theming.md** — Create the theming guide:
       - Frontmatter: `title: Theming`, `sidebar_position: 2`
       - Sections:
         - **DWC Token System**: Explain that all components use `--dwc-*` CSS custom properties from the DWC (Dynamic Web Components) design system. Components work with sensible defaults when no theme is loaded.
         - **Available Tokens**: List the main token categories (colors, spacing, typography, borders, shadows) with examples of each. Reference the component API pages for component-specific tokens.
         - **Customizing Tokens**: Show how to override tokens at document level (`:root { --dwc-color-primary: #3b82f6; }`) and per-component level
         - **Dark Mode**: Explain the `:host(.theme-dark)` pattern. Show how to apply dark mode via component attribute or CSS class.
         - **CSS Parts**: Explain `::part()` selectors with a concrete example (styling sp-org-chart user-tile part)
         - **Integration with DWC**: Note that if the full DWC theme CSS is already loaded, components will inherit all styling automatically

    Note: Use standard Markdown (not MDX) for these pages since they don't need React component imports. Keep content practical and concise — avoid overly verbose documentation.
  </action>
  <verify>
    - `ls docs/docs/getting-started.md docs/docs/theming.md` both exist
    - `cd docs && npm run build 2>&1 | tail -5` — build should succeed (or at least get further than before, may still need component pages for sidebars to fully resolve)
  </verify>
  <done>
    Getting-started guide covers npm install, CDN script tag, peer dependencies, and quick start example (DOCS-04); Theming guide covers --dwc-* tokens, customization, dark mode, CSS parts, and DWC integration (DOCS-05); Docusaurus build progresses successfully.
  </done>
</task>

</tasks>

<verification>
1. `docs/` directory exists with package.json, docusaurus.config.ts, sidebars.ts
2. `cd docs && npm run build` completes (possibly with warnings about missing component pages — acceptable)
3. LiveExample.tsx and ApiReference.tsx are valid TypeScript
4. getting-started.md has npm install AND CDN examples
5. theming.md has --dwc-* token documentation AND dark mode section
6. .nojekyll exists in docs/static/
</verification>

<success_criteria>
- Docusaurus site scaffolded and buildable
- Custom components (LiveExample, ApiReference) created and ready for use in MDX pages
- Getting-started guide covers both installation methods (DOCS-04)
- Theming guide covers token system, customization, and dark mode (DOCS-05)
</success_criteria>

<output>
After completion, create `.planning/phases/06-documentation-publishing/06-03-SUMMARY.md`
</output>
