---
title: sp-popover
description: Viewport-aware popover positioning component with 6 placements, boundary detection, and configurable dismiss behaviors.
sidebar_position: 4
---

import docsData from '@site/../docs.json';
import LiveExample from '@site/src/components/LiveExample';
import ApiReference from '@site/src/components/ApiReference';

export const componentDocs = docsData.components.find(c => c.tag === 'sp-popover');

# sp-popover

Reusable viewport-aware popover component that positions slotted content relative to an anchor element. Supports 6 placement options (`bottom-start`, `bottom-end`, `top-start`, `top-end`, `right-start`, `left-start`), auto-repositioning when near viewport boundaries, close-on-outside-click and close-on-escape behaviors, and a fade+slide enter animation.

The anchor defaults to the element's `previousElementSibling`, so placing a `<sp-popover>` directly after a button makes that button the trigger automatically â€” no extra configuration needed. Use the `anchor` prop to provide a CSS selector or a direct element reference for any other anchor.

## Installation

Install from a [GitHub Release](https://github.com/StephanWald/trm-ai-webcomponents/releases):

```bash
npm install https://github.com/StephanWald/trm-ai-webcomponents/releases/download/v0.0.1/skillspilot-webcomponents-0.0.1.tgz
```

Or load via script tag:

```html
<script type="module" src="https://stephanwald.github.io/trm-ai-webcomponents/wc/skillspilot.esm.js"></script>
```

## Examples

### Basic Popover

A button that toggles a popover below it. The `<sp-popover>` element is placed directly after the button so `previousElementSibling` resolves the anchor automatically. Click outside or press Escape to dismiss.

<LiveExample height="200px" code={`
<button onclick="document.getElementById('pop1').togglePopover()" style="padding:6px 16px;cursor:pointer">
  Toggle Popover
</button>
<sp-popover id="pop1" placement="bottom-start">
  <div style="padding:12px 16px;min-width:180px">
    <strong>Hello from sp-popover!</strong>
    <p style="margin:8px 0 0;font-size:0.875rem;color:#555">
      This content is slotted into the popover. Click outside or press Escape to close.
    </p>
  </div>
</sp-popover>
`} />

### Placement Options

The `placement` prop controls where the popover appears relative to its anchor. The component automatically flips to an alternate placement when the preferred placement overflows the viewport. All 6 placement values are shown below.

<LiveExample height="220px" code={`
<div style="display:flex;gap:8px;flex-wrap:wrap;padding:24px 0">
  <button id="btn-bottom" onclick="document.getElementById('pop-bottom').togglePopover()" style="padding:6px 14px;cursor:pointer">
    bottom-start
  </button>
  <sp-popover id="pop-bottom" placement="bottom-start">
    <div style="padding:10px 14px;font-size:0.875rem">Placed below the anchor (bottom-start)</div>
  </sp-popover>

  <button id="btn-top" onclick="document.getElementById('pop-top').togglePopover()" style="padding:6px 14px;cursor:pointer">
    top-start
  </button>
  <sp-popover id="pop-top" placement="top-start" anchor="#btn-top">
    <div style="padding:10px 14px;font-size:0.875rem">Placed above the anchor (top-start)</div>
  </sp-popover>

  <button id="btn-right" onclick="document.getElementById('pop-right').togglePopover()" style="padding:6px 14px;cursor:pointer">
    right-start
  </button>
  <sp-popover id="pop-right" placement="right-start" anchor="#btn-right">
    <div style="padding:10px 14px;font-size:0.875rem">Placed to the right (right-start)</div>
  </sp-popover>
</div>
`} />

### Dismiss Behaviors

Control whether the popover closes when clicking outside (`close-on-click`) or pressing Escape (`close-on-escape`). Toggle the checkboxes to see the effect in real time.

<LiveExample height="280px" code={`
<div style="display:flex;gap:12px;margin-bottom:12px;flex-direction:column">
  <label style="display:flex;align-items:center;gap:8px;cursor:pointer">
    <input type="checkbox" id="chk-click" checked onchange="syncDismiss()"> Close on outside click
  </label>
  <label style="display:flex;align-items:center;gap:8px;cursor:pointer">
    <input type="checkbox" id="chk-esc" checked onchange="syncDismiss()"> Close on Escape key
  </label>
</div>
<button onclick="document.getElementById('pop-dismiss').togglePopover()" style="padding:6px 16px;cursor:pointer">
  Toggle Popover
</button>
<sp-popover id="pop-dismiss" placement="bottom-start">
  <div style="padding:12px 16px;min-width:200px">
    <p style="margin:0;font-size:0.875rem">Dismiss behavior controlled by checkboxes above.</p>
    <button onclick="document.getElementById('pop-dismiss').hidePopover()" style="margin-top:8px;padding:4px 10px;cursor:pointer;font-size:0.8rem">
      Close manually
    </button>
  </div>
</sp-popover>
<script>
  function syncDismiss() {
    const pop = document.getElementById('pop-dismiss');
    pop.closeOnClick = document.getElementById('chk-click').checked;
    pop.closeOnEscape = document.getElementById('chk-esc').checked;
  }
<\/script>
`} />

### Programmatic Control

Use the `showPopover()`, `hidePopover()`, and `togglePopover()` methods to control the popover from JavaScript. Listen to `popoverOpen` and `popoverClose` events to react to visibility changes.

<LiveExample height="260px" code={`
<button id="anchor-prog" style="padding:6px 16px;cursor:pointer">Anchor Button</button>
<sp-popover id="pop-prog" placement="bottom-start">
  <div style="padding:12px 16px;min-width:180px;font-size:0.875rem">
    Controlled programmatically.
  </div>
</sp-popover>
<div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap">
  <button onclick="document.getElementById('pop-prog').showPopover()" style="padding:5px 12px;cursor:pointer">showPopover()</button>
  <button onclick="document.getElementById('pop-prog').hidePopover()" style="padding:5px 12px;cursor:pointer">hidePopover()</button>
  <button onclick="document.getElementById('pop-prog').togglePopover()" style="padding:5px 12px;cursor:pointer">togglePopover()</button>
</div>
<div id="pop-log" style="margin-top:8px;padding:8px;background:#f5f5f5;border-radius:4px;font-family:monospace;font-size:0.8rem;min-height:40px;"></div>
<script>
  const pop = document.getElementById('pop-prog');
  const log = document.getElementById('pop-log');

  function addLog(msg) {
    const p = document.createElement('p');
    p.style.margin = '2px 0';
    p.textContent = new Date().toLocaleTimeString() + ' - ' + msg;
    log.prepend(p);
    if (log.children.length > 4) log.lastChild.remove();
  }

  pop.addEventListener('popoverOpen', () => addLog('popoverOpen'));
  pop.addEventListener('popoverClose', () => addLog('popoverClose'));
<\/script>
`} />

## API Reference

<ApiReference component={componentDocs} />
